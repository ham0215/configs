" vi互換モードを廃止
set nocompatible

" ステータスバー2行
set laststatus=2

set expandtab     " タブ入力を複数の空白入力に置き換える
set tabstop=2     " 画面上でタブ文字が占める幅
set shiftwidth=2  " 自動インデントでずれる幅
set softtabstop=2 " 連続した空白に対してタブキーやバックスペースキーでカーソルが動く幅
set autoindent    " 改行時に前の行のインデントを継続する
set smartindent   " 改行時に入力された行の末尾に合わせて次の行のインデントを増減する
set encoding=UTF-8

syntax on

"インクリメンタルサーチを有効にする
set incsearch
" 大文字小文字を区別しない
set ignorecase
" 検索文字ハイライト
set hlsearch

""""""""""" insert mode
" backspace
set backspace=indent,eol,start

" insertモードから抜ける
inoremap <silent> jj <ESC>

" 挿入モードでのカーソル移動
inoremap <C-j> <Down>
inoremap <C-k> <Up>
inoremap <C-n> <Left>
inoremap <C-l> <Right>

" tagsジャンプの時に複数ある時は一覧表示
nnoremap <C-]> g<C-]>

" <Leader>を,に変更
:let mapleader = ","

" dein
if &compatible
 set nocompatible
endif
set runtimepath+=~/.cache/dein/repos/github.com/Shougo/dein.vim

if dein#load_state('~/.cache/dein')
 call dein#begin('~/.cache/dein')

 call dein#add('~/.cache/dein')

 " deoplete
 call dein#add('Shougo/deoplete.nvim')
 "call dein#add('Shougo/neco-syntax')
 "call dein#add('ujihisa/neco-look')
 "call dein#add('Shougo/deoplete-rct')
 "call dein#add('fishbullet/deoplete-ruby')
 "call dein#add('osyo-manga/vim-monster')
 if !has('nvim')
   call dein#add('roxma/nvim-yarp')
   call dein#add('roxma/vim-hug-neovim-rpc')
 endif

 " unite
 call dein#add('Shougo/unite.vim')
 call dein#add('Shougo/neomru.vim')

 " git
 call dein#add('tpope/vim-fugitive')
 call dein#add('airblade/vim-gitgutter')

 " status bar
 call dein#add('vim-airline/vim-airline')
 call dein#add('vim-airline/vim-airline-themes')
 call dein#add('ryanoasis/vim-devicons')

 " color
 call dein#add('tomasr/molokai')
 
  " taglist
 call dein#add('vim-scripts/taglist.vim')
 
  " yajs
 call dein#add('othree/yajs.vim')
 
  " vim-slim
 call dein#add('slim-template/vim-slim')

 call dein#end()
 call dein#save_state()
endif
if has('vim_starting') && dein#check_install()
  call dein#install()
endif

filetype plugin indent on
syntax enable

colorscheme molokai

"""""""" deoplete
"let g:deoplete#enable_at_startup = 1
"let g:monster#completion#backend = 'solargraph'

"""""""" unite
" 入力モードで開始する
let g:unite_enable_start_insert=1
" history/yank有効化
let g:unite_source_history_yank_enable = 1

" バッファ一覧
noremap <C-P> :Unite buffer<CR>
" ファイル一覧
noremap <C-N> :UniteWithBufferDir -buffer-name=files file<CR>
" 最近使ったファイルの一覧
noremap <C-Z> :Unite file_mru<CR>
" sourcesを「今開いているファイルのディレクトリ」とする
noremap :uff :<C-u>UniteWithBufferDir file -buffer-name=file<CR>
" history/yank
nnoremap <silent> <C-y> :Unite history/yank<CR>
" ウィンドウを分割して開く
"au FileType unite nnoremap <silent> <buffer> <expr> <C-J> unite#do_action('split')
"au FileType unite inoremap <silent> <buffer> <expr> <C-J> unite#do_action('split')
" ウィンドウを縦に分割して開く
"au FileType unite nnoremap <silent> <buffer> <expr> <C-K> unite#do_action('vsplit')
"au FileType unite inoremap <silent> <buffer> <expr> <C-K> unite#do_action('vsplit')
" ESCキーを2回押すと終了する
au FileType unite nnoremap <silent> <buffer> <ESC><ESC> :q<CR>
au FileType unite inoremap <silent> <buffer> <ESC><ESC> <ESC>:q<CR>

"""""""" vim-gitgutter
let g:gitgutter_sign_added = '+'
let g:gitgutter_sign_modified = '->'
let g:gitgutter_sign_removed = '-'

"""""""" taglist
let Tlist_Show_One_File = 1
let Tlist_Use_Right_Window = 1
let Tlist_Exit_OnlyWindow = 1
map <silent> <leader>l :TlistToggle<CR>

"""""""" yajs
autocmd BufRead,BufNewFile *.es6 setfiletype javascript

"""""""" vim-slim
autocmd BufRead,BufNewFile *.slim setfiletype slim
